# Military-Grade Log Rotation Configuration
# Place this in /etc/logrotate.d/erp-system

# 1. PHP Application Logs
/home/arpit/Backend-Security/06-military-grade-logging/logs/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 640 www-data www-data
    dateext
    dateformat -%Y%m%d
}

# 2. Apache Logs
/var/log/apache2/erp_*.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 640 www-data adm
    sharedscripts
    postrotate
        if /etc/init.d/apache2 status > /dev/null ; then \
            /etc/init.d/apache2 reload > /dev/null; \
        fi
    endscript
}

# 3. MySQL Logs
/var/log/mysql/*.log {
    daily
    missingok
    rotate 7
    compress
    notifempty
    create 640 mysql adm
    sharedscripts
    postrotate
        /usr/bin/mysqladmin flush-logs
    endscript
}
